export interface DBTIResultData {
  id: number;
  code: string;
  name: string;
  keywords: string[];
  image: string;
  goodAt: string;
  bestPosition: string;
  habit: string;
  risk: string;
  bestie: number[];
}

export interface BestieInfo {
  id: number;
  name: string;
  image: string;
  reason: string;
}

export const DBTI_RESULTS: Record<number, DBTIResultData> = {
  1: {
    id: 1,
    code: "ENFP",
    name: "햇살형 공감설계자, 골든 리트리버",
    keywords: ["사람 좋아", "팀 분위기 메이커", "유저 공감의 화신"],
    image: "/dbti-1.webp",
    goodAt: "온보딩/문서화(DX), 디자인-개발 핸드셰이크, 사용자 인터뷰 요약, 프로토타입 데모",
    bestPosition: "프론트엔드 + 프로덕트(UX) 엔지니어, DevRel, Design system",
    habit: "가독성·네이밍 집착, 스토리북/샌드박스 좋아함, PR 설명이 친절하고 이모지가 많아요 😄",
    risk: "스코프가 자주 넓어지거나 새로운 기술에 쉽게 매료될 수 있어요.",
    bestie: [13, 5, 2]
  },
  2: {
    id: 2,
    code: "ENTP",
    name: "호기심 폭발형 실험자, 비글",
    keywords: ["호기심 폭발", "실험가", "토론광"],
    image: "/dbti-2.webp",
    goodAt: "프로토타입 빠르게 만들기, 디버깅, 성능 개선, 대안 제시, 자동화 스크립트 제작",
    bestPosition: "프로토타이핑 담당, 성능 최적화 담당, 테크 리더",
    habit: "실험용 브랜치를 많이 사용하고 결과를 README나 PR 본문에 꼼꼼히 정리해요.",
    risk: "새 기술에 혹해 미완성 실험이 쌓이거나 토론이 길어져 일정을 놓칠 수 있어요.",
    bestie: [4, 5, 3]
  },
  3: {
    id: 3,
    code: "ENFJ",
    name: "올라운더 풀스택, 시고르 자브종",
    keywords: ["올라운더", "브릿지", "사교성 최강", "풀스택"],
    image: "/dbti-3.webp",
    goodAt: "요구사항 정리, 직군 간 브릿지 역할, 온보딩 및 문서화 체계 정비",
    bestPosition: "Full-stack Bridge, Tech PM",
    habit: "작은 단위의 PR과 프리뷰 링크를 자주 공유하며, Mock 데이터를 활용해 병렬로 진행해요.",
    risk: "모든 일을 도맡아 하려다 번아웃이 오거나 거절을 못 해 일이 쌓일 수 있어요.",
    bestie: [2, 13, 15]
  },
  4: {
    id: 4,
    code: "ENTJ",
    name: "컨벤션이 없으면 못살아! 규칙왕, 푸들",
    keywords: ["체계적", "똑똑한 리더", "규칙을 만드는 자"],
    image: "/dbti-4.webp",
    goodAt: "로드맵 설계, 작업 분배, 문서 구조화, 아키텍처 설계",
    bestPosition: "파트장, PM형 개발자",
    habit: "철저하게 컨벤션을 준수하고 네이밍 규칙과 구조 리팩토링에 집중해요.",
    risk: "속도보다 전략과 규칙을 중시해서 초기 실행이 조금 늦어질 수 있어요.",
    bestie: [15, 5, 1]
  },
  5: {
    id: 5,
    code: "ESTJ",
    name: "밤새 코딩하는 실행왕, 보더콜리",
    keywords: ["에너지만렙", "실행력 원탑", "집중력 괴물"],
    image: "/dbti-5.webp",
    goodAt: "마감 기한 준수, 빠른 기능 완성, 꼼꼼한 코드 리뷰",
    bestPosition: "백엔드 코어, 스프린트 운영자",
    habit: "기능 개발이 끝날 때까지 자리를 지키며 효율적인 자동화 스크립트를 사용해요.",
    risk: "속도에 너무 집중하다 보면 가끔 아주 작은 디테일을 놓칠 수 있어요.",
    bestie: [4, 13, 9]
  },
  6: {
    id: 6,
    code: "ESFP",
    name: "단톡에 제일 먼저 답하는 분위기 메이커, 웰시코기",
    keywords: ["사교만렙", "분위기 메이커", "즉흥 아이디어 뱅크"],
    image: "/dbti-6.webp",
    goodAt: "활기찬 분위기 조성, 빠른 프로토타입 제작, 즉각적인 피드백 수용",
    bestPosition: "프론트엔드 UI, 프로토타입 개발자, 해커톤 메이트",
    habit: "메시지와 PR 반응이 매우 빠르고 UI/UX 측면에서 반짝이는 아이디어를 제시해요.",
    risk: "관심사가 다양해 집중력이 분산되거나 마무리를 어려워할 수 있어요.",
    bestie: [15, 11, 14]
  },
  7: {
    id: 7,
    code: "ESTP",
    name: "현장형 해결사, 진돗개",
    keywords: ["액션형", "문제 해결형", "즉시 실행"],
    image: "/dbti-7.webp",
    goodAt: "빠른 트러블 슈팅, 디버깅, 실시간 문제 대응 및 신규 기술 적용",
    bestPosition: "프론트엔드, 운영/배포 담당(DevOps), 프로토타입 제작",
    habit: "실행을 최우선으로 하며 직관적인 네이밍을 선호해요.",
    risk: "장기적인 설계보다는 당장의 해결에 치중해 문서화가 부족할 수 있어요.",
    bestie: [13, 4, 16]
  },
  8: {
    id: 8,
    code: "ESFJ",
    name: "협업의 달인, 닥스훈트",
    keywords: ["팀플레이", "케어러", "따뜻한 조력자"],
    image: "/dbti-8.webp",
    goodAt: "팀 분위기 조율, 협업 툴 관리, 사용자 친화적인 기능 기획 및 UI 개선",
    bestPosition: "프론트엔드, PM/PO, QA",
    habit: "이해하기 쉬운 코드와 꼼꼼한 주석을 작성하며 코드 리뷰에 적극적으로 참여해요.",
    risk: "관계에 치중하다 보니 때로는 갈등을 피하기 위해 결정을 미룰 수 있어요.",
    bestie: [12, 10, 15]
  },
  9: {
    id: 9,
    code: "INFP",
    name: "혁신적인 크리에이터, 사모예드",
    keywords: ["이상주의자", "크리에이터", "감성 개발"],
    image: "/dbti-9.webp",
    goodAt: "독창적 아이디어 발굴, 감성적 UX 접근, AI 모델 실험",
    bestPosition: "AI 연구, 데이터 사이언스, 크리에이티브 코딩",
    habit: "구조미가 있는 아름다운 코드를 지향하며 가독성을 매우 중요하게 생각해요.",
    risk: "현실적인 제약이나 마감 일정에 약하며 이상적인 결과에 몰입할 수 있어요.",
    bestie: [5, 3, 16]
  },
  10: {
    id: 10,
    code: "INTP",
    name: "디테일 수호자, 치와와",
    keywords: ["섬세한 케어", "안정적 지원", "팀의 조력자"],
    image: "/dbti-10.webp",
    goodAt: "버그 및 UI 결함 포착, QA 환경 관리, 가이드라인 정리",
    bestPosition: "QA 엔지니어, 프론트엔드 디테일 담당",
    habit: "엣지 케이스를 철저히 확인하고 팀원들을 위해 PR 설명을 아주 상세하게 달아줘요.",
    risk: "지나치게 세심해지면 일정이 지연되거나 자기 의견을 내기 어려워할 수 있어요.",
    bestie: [5, 1, 8]
  },
  11: {
    id: 11,
    code: "INFJ",
    name: "고집 있는 버그헌터, 시바견",
    keywords: ["마이웨이", "독립심 강함", "디버깅 집착"],
    image: "/dbti-12.webp",
    goodAt: "코드 전수 검토, 버그 추적 및 성능 병목 현상 발견",
    bestPosition: "코드 리뷰어, 보안 취약점 헌터, 자동화 담당",
    habit: "스스로 납득할 때까지 리팩토링을 반복하며 본인만의 철칙을 고수해요.",
    risk: "팀 컨벤션보다 본인의 방식을 고집하거나 흥미 없는 업무에 소홀할 수 있어요.",
    bestie: [6, 3, 2]
  },
  12: {
    id: 12,
    code: "ISTP",
    name: "효율 중심 해결사, 말티즈",
    keywords: ["효율성", "문제 해결사", "최적화"],
    image: "/dbti-14.webp",
    goodAt: "복잡한 디버깅, 성능 최적화, 반복 작업 자동화",
    bestPosition: "백엔드 개발자, 최적화 전문가",
    habit: "최소한의 노력으로 최대 효율을 내는 코드를 선호하며 코드로 직접 증명해요.",
    risk: "이론적인 회의를 지루해하거나 장기적인 유지보수 문서화를 생략할 수 있어요.",
    bestie: [13, 4, 8]
  },
  13: {
    id: 13,
    code: "INTJ",
    name: "원칙과 책임의 수호자, 도베르만",
    keywords: ["책임감", "원칙주의자", "믿음직한 수호자"],
    image: "/dbti-11.webp",
    goodAt: "핵심 기능 안정화, CI/CD 관리, 보안 이슈 대응",
    bestPosition: "백엔드 안정화 담당, 인프라 엔지니어",
    habit: "예외 처리를 철저히 하고 정확하고 단정한 커밋 메시지를 남겨요.",
    risk: "안정성을 너무 중시한 나머지 새로운 시도나 속도전에 약할 수 있어요.",
    bestie: [2, 7, 1]
  },
  14: {
    id: 14,
    code: "ISTJ",
    name: "조용한 완벽주의자, 시베리안 허스키",
    keywords: ["계획형", "완벽주의자", "조용한 카리스마"],
    image: "/dbti-15.webp",
    goodAt: "프로젝트 기준 수립, 안정적인 일정 관리, 체계적인 문서화",
    bestPosition: "백엔드, 파트 리더",
    habit: "리팩토링보다 처음부터 완벽한 설계를 추구하며 커밋 로그를 아주 꼼꼼히 관리해요.",
    risk: "유연성이 다소 부족하여 갑작스러운 변수가 생기면 스트레스를 받을 수 있어요.",
    bestie: [4, 7, 6]
  },
  15: {
    id: 15,
    code: "ISFJ",
    name: "섬세한 프로젝트 가디언, 포메라니안",
    keywords: ["서포터", "헌신형", "디테일러"],
    image: "/dbti-16.webp",
    goodAt: "팀원 서포트, 놓치기 쉬운 세부 사항 관리, 일정 및 협업 조율",
    bestPosition: "PM, QA, 운영 매니저",
    habit: "다른 사람들도 읽기 쉬운 코드를 지향하며 사소한 부분도 다시 한번 확인해요.",
    risk: "갈등을 피하려다 본인의 의견을 굽히거나 혼자 일을 떠안을 위험이 있어요.",
    bestie: [8, 6, 4]
  },
  16: {
    id: 16,
    code: "ISFP",
    name: "묵묵한 UI 장인, 불독",
    keywords: ["감각적", "효율주의", "프로 뚝딱러"],
    image: "/dbti-13.webp",
    goodAt: "디자인 시스템 구축, 정교한 UI 구현, CSS 애니메이션",
    bestPosition: "프론트엔드 UI/UX 개발자",
    habit: "간결하고 깔끔한 코드를 선호하며 눈에 보이는 결과물을 빠르게 만들어내요.",
    risk: "눈에 보이지 않는 아키텍처 설계나 잦은 요구사항 변경에 취약할 수 있어요.",
    bestie: [7, 9, 3]
  }
};

/**
 * 특정 ID의 DBTI 결과 데이터를 가져오는 함수
 */
export const getDBTIResult = (id: number): DBTIResultData | null => {
  return DBTI_RESULTS[id] || null;
};

/**
 * 특정 결과 ID의 모든 베스티 정보를 배열로 추출하는 함수 (전체 출력용)
 */
export const getAllBestiesInfo = (id: number): BestieInfo[] => {
  const result = DBTI_RESULTS[id];
  if (!result || !result.bestie.length) return [];
  
  return result.bestie.map((bestieId) => {
    const bestieData = DBTI_RESULTS[bestieId];
    return {
      id: bestieId,
      name: bestieData?.name || "알 수 없는 파트너",
      image: bestieData?.image || "/default.webp",
      reason: getBestieReason(id, bestieId)
    };
  });
};

/**
 * 모든 관계별 이유를 포함한 궁합 이유 반환 함수
 */
export const getBestieReason = (mainId: number, bestieId: number): string => {
  const reasons: Record<string, string> = {
    // 골든 리트리버 기반
    '1-13': '도베르만의 원칙이 리트리버의 확산형 아이디어에 튼튼한 뼈대를 세워줘요.',
    '1-5': '리트리버의 넘치는 아이디어를 보더콜리의 실행력으로 끝까지 완성해줍니다.',
    '1-2': '창의적인 리트리버와 실험적인 비글이 만나 혁신적인 시너지를 만들어내요.',
    
    // 비글 기반
    '2-4': '비글의 다양한 실험들을 푸들이 체계적인 규칙으로 정리해 결과로 이어지게 해요.',
    '2-5': '비글의 폭발적인 아이디어를 보더콜리가 밤을 새워서라도 현실로 구현해냅니다.',
    '2-3': '비글의 파격적인 시도를 시고르 자브종이 팀의 언어로 매끄럽게 번역해줘요.',

    // 시고르 자브종 기반
    '3-2': '비글이 새로운 기술을 실험하면, 시고르 자브종이 이를 운영 체계에 안정적으로 녹여내요.',
    '3-13': '도베르만이 안전장치를 마련해주어 시고르 자브종이 마음껏 속도를 낼 수 있어요.',
    '3-15': '시고르 자브종이 놓친 세심한 일정 관리를 포메라니안이 꼼꼼하게 챙겨줍니다.',

    // 푸들 기반
    '4-15': '푸들의 전략적인 계획과 포메라니안의 섬세한 관리가 만나 프로젝트가 안정적으로 흘러가요.',
    '4-5': '푸들의 치밀한 설계 위에 보더콜리의 속도감이 더해져 최고의 퍼포먼스를 냅니다.',
    '4-1': '네이밍과 컨벤션에 집착하는 두 섬세함이 만나 코드의 예술성을 한층 높여줘요.',

    // 보더콜리 기반
    '5-4': '자칫 놓칠 수 있는 전략적 방향성을 푸들이 잡아주어 보더콜리의 에너지를 효율적으로 써요.',
    '5-13': '도베르만의 완벽한 예외 처리가 보더콜리의 빠른 개발 속도를 든든하게 받쳐줍니다.',
    '5-9': '보더콜리의 실행력과 사모예드의 창의성이 만나 세상에 없던 결과물을 뚝딱 만들어내요.',

    // 웰시코기 기반
    '6-15': '웰시코기의 톡톡 튀는 생각들을 포메라니안이 차분하게 정리하고 실행으로 옮겨줘요.',
    '6-11': '웰시코기의 밝은 에너지가 고집 있는 시바견을 유연하게 만들어 협업을 이끌어냅니다.',
    '6-14': '즉흥적인 웰시코기와 계획적인 허스키가 만나 균형 잡힌 팀워크를 완성해요.',

    // 진돗개 기반
    '7-13': '진돗개의 빠른 대처 능력에 도베르만의 안정성이 더해져 완벽한 해결책이 됩니다.',
    '7-4': '진돗개의 강력한 실행력을 푸들이 팀 전체의 장기 로드맵과 완벽하게 정렬시켜 줍니다.',
    '7-16': '진돗개가 로직을 짜면 불독이 픽셀 단위로 UI를 빚어내는 환상의 프론트엔드 듀오예요.',

    // 닥스훈트 기반
    '8-12': '닥스훈트의 소통 능력과 말티즈의 효율적인 문제 해결력이 만나 팀의 균형을 잡아줘요.',
    '8-10': '두 섬세함이 만나 아주 작은 엣지 케이스까지 놓치지 않는 완벽한 사용자 경험을 제공해요.',
    '8-15': '팀원을 아끼는 두 따뜻한 마음이 만나 서로를 헌신적으로 돕는 단단한 조직을 만듭니다.',

    // 사모예드 기반
    '9-5': '사모예드의 혁신적인 아이디어가 보더콜리를 만나면 그 즉시 실현 가능한 서비스가 됩니다.',
    '9-3': '사모예드의 추상적인 비전을 시고르 자브종이 현실적인 개발 요건으로 잘 풀어내 줍니다.',
    '9-16': '불독의 정교한 구현력과 사모예드의 창의적인 아이디어가 만나 최고의 디자인을 완성해요.',

    // 치와와 기반
    '10-5': '보더콜리의 폭발적인 실행력을 치와와의 섬세한 디테일이 뒷받침해줘서 사고를 방지해요.',
    '10-1': '리트리버의 따뜻한 공감 덕분에 치와와가 더 적극적으로 자신의 세밀한 의견을 낼 수 있어요.',
    '10-8': '닥스훈트의 포용력이 치와와의 예민함을 섬세한 검토 능력으로 승화시켜 줍니다.',

    // 시바견 기반
    '11-6': '웰시코기의 사교력이 시바견의 고집 있는 성향을 부드럽게 녹여 협업을 도와줍니다.',
    '11-3': '마이웨이 성향의 시바견과 소통왕 시고르 자브종은 팀 내 가교 역할을 하는 환상의 짝꿍이에요.',
    '11-2': '두 호기심 대장이 만나 집요하게 버그를 추적하고 끝내 해결해내는 쾌거를 이룹니다.',

    // 말티즈 기반
    '12-13': '말티즈가 빠르게 해결한 코드를 도베르만이 문서화하고 장기 유지보수가 가능하게 다듬어줘요.',
    '12-4': '말티즈의 효율 중심 개발에 푸들이 체계적인 컨벤션을 입혀 관리 효율을 극대화합니다.',
    '12-8': '말티즈의 기술적 해결력과 닥스훈트의 조율 능력이 만나 서비스 완성도를 높여줍니다.',

    // 도베르만 기반
    '13-2': '원칙주의자 도베르만에게 비글의 도전 정신은 기술적 성장을 가져다주는 좋은 자극제가 돼요.',
    '13-7': '도베르만이 안전 장치를 만들면 진돗개가 마음 놓고 현장에서 문제를 해결하는 콤비입니다.',
    '13-1': '리트리버의 유연함이 도베르만의 딱딱한 원칙을 팀원들이 받아들이기 쉽게 순화해줘요.',

    // 시베리안 허스키 기반
    '14-4': '서로의 체계적인 성향을 깊이 신뢰하며, 변수 없는 완벽한 프로젝트 운영을 지향합니다.',
    '14-7': '보수적일 수 있는 허스키의 계획에 진돗개의 유연한 실행력이 날개를 달아줍니다.',
    '14-6': '허스키의 무거운 책임감을 웰시코기의 긍정적인 에너지가 가볍게 덜어줍니다.',

    // 포메라니안 기반
    '15-8': '두 서포터가 만나 팀원들의 고충을 가장 먼저 살피고 따뜻한 개발 문화를 만들어가요.',
    '15-6': '웰시코기의 톡톡 튀는 생각들을 포메라니안이 묵묵히 지원하여 실제 성과로 이어지게 해요.',
    '15-4': '계획왕 푸들의 빈틈을 포메라니안의 세밀한 더블 체크가 메워주어 완벽함을 더합니다.',

    // 불독 기반
    '16-7': '불독이 UI를 빚어내면, 진돗개가 이를 서비스 환경에 즉시 배포하는 찰떡궁합이에요.',
    '16-9': '불독의 감각적인 구현 능력과 사모예드의 창의적인 시각이 만나 시각적 완성도의 정점을 찍습니다.',
    '16-3': '불독의 간결한 스타일을 시고르 자브종이 문서화하여 팀원들이 활용하기 좋게 공유해줘요.'
  };
  return reasons[`${mainId}-${bestieId}`] || '서로의 부족한 점을 보완하며 팀의 완성도를 높여주는 최고의 파트너예요.';
};

const DBTI_CODE_LOOKUP: Record<string, number> = Object.values(DBTI_RESULTS).reduce((acc, result) => {
  acc[result.code.toLowerCase()] = result.id;
  return acc;
}, {} as Record<string, number>);

export const getDBTIIdFromCode = (code?: string | null): number | null => {
  if (!code) return null;
  return DBTI_CODE_LOOKUP[code.toLowerCase()] ?? null;
};
